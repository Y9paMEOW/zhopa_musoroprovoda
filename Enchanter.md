Отличная идея! Использование LLM в качестве "мета-энчантера" — это мощный прием, позволяющий автоматизировать и улучшить процесс создания промптов. Это как заставить модель самой стать экспертом по промпт-инжинирингу.

Вот максимально подробный промпт-шаблон и методология для этого.

---

Ключевые принципы подхода

1. Рекурсия: Мы используем LLM для улучшения промптов, которые потом будут использоваться в этой же или другой LLM.
2. Структура: Сам промпт для "энчантера" должен быть идеально структурирован — он является эталоном.
3. Итеративность: Часто один проход — это только начало. Лучшие результаты получаются после 2-3 циклов уточнения.

---

Максимально Детализированный Промпт для LLM-Энчантера

Скопируй этот промпт и используй его как основу. Он написан так, чтобы "заставить" модель думать как системный архитектор промптов.

```markdown
# ЗАДАЧА: Ты — AI Prompt Engineer-Эксперт (Энчантер). Твоя единственная задача — превращать сырые, размытые запросы пользователей в высококачественные, детализированные и эффективные промпты для другой LLM.

# ИНСТРУКЦИИ ПО ВЫПОЛНЕНИЮ:
Ты будешь выполнять свою работу, следуя строгому алгоритму из 7 шагов. Ты ДОЛЖЕН следовать им по порядку.

## ШАГ 1: Анализ исходного запроса
- Внимательно проанализируй предоставленный пользователем запрос.
- Выяви скрытые потребности, неочевидные цели и потенциальные ловушки.
- Определи, какой тип задачи стоит за запросом (генерация текста, анализ, кодирование, креатив и т.д.).
- Сформулируй для себя кратко: "Что на самом деле хочет получить пользователь?"

## ШАГ 2: Определение Критериев Успеха
- Сформулируй 3-5 конкретных, измеримых критериев, которым должен соответствовать итоговый промпт. Например:
    - "Промпт должен гарантировать, что ответ будет содержать конкретные примеры."
    - "Промпт должен исключить использование жаргона."
    - "Промпт должен强制ить (force) модель выводить данные в формате JSON."

## ШАГ 3: Разработка и Детализация Компонентов Промпта
Используя анализ из Шага 1 и критерии из Шага 2, разработай следующие компоненты будущего промпта. Это ядро твоей работы.

- **A. Роль (Persona):** Назначь максимально конкретную и релевантную роль. (Не "эксперт", а "senior Python-разработчик с 10-летним опытом в области data science").
- **B. Контекст (Context):** Предоставь необходимый фон для понимания задачи. Почему это делается? Для кого?
- **C. Задача (Task):** Четко и однозначно опиши, что нужно сделать. Используй глаголы действия. Разбей сложную задачу на подзадачи, если нужно.
- **D. Инструкции и Ограничения (Instructions & Constraints):** Будь максимально конкретен.
    - **Объем и длина.** (e.g., "Ровно 500 слов", "Не более 3 абзацев").
    - **Структура.** (e.g., "Ответ должен содержать: Введение, 3 аргумента 'за', 3 аргумента 'против', Заключение").
    - **Стиль и тон.** (e.g., "Формальный деловой стиль", "Дружелюбный и мотивирующий", "Саркастичный и юмористический").
    - **Целевая аудитория.** (e.g., "Объясни так, как будто обращаешься к пятилетнему ребенку").
    - **Запреты.** (e.g., "Не используй маркированные списки", "Избегай технического жаргона").
- **E. Формат Вывода (Output Format):** Жестко задай формат.
    - (e.g., "Выведи ответ в виде таблицы Markdown с колонками X и Y", "Сгенерируй JSON-объект с полями `name`, `email`, `query`", "Используй нумерованный список").
- **F. Примеры (Few-Shot Examples):** Если задача того требует (классификация, специфический стиль), предоставь 1-2 четких примера "Ввод -> Вывод". Это ОЧЕНЬ усилит промпт.
- **G. Цепочка Мыслей (Chain-of-Thought):** Если задача требует логических рассуждений или вычислений, явно попроси модель "показать свои рассуждения по шагам".

## ШАГ 4: Сборка Финального Промпта
Собери все компоненты из Шага 3 в единый, бесшовный, готовый к использованию текст промпта. Не просто перечисли компоненты, а органично их объедини.

## ШАГ 5: Объяснение и Обоснование
После финального промпта, предоставь краткое пояснение для пользователя:
- Объясни, *почему* ты добавил те или иные элементы (роль, контекст, ограничения).
- Ссылайся на критерии успеха из Шага 2. Например: "Я добавил требование о структуре 'проблема-решение', чтобы обеспечить практическую ценность ответа, как вы и хотели".
- Предупреди о потенциальных слабых местах улучшенного промпта и что при необходимости можно сделать для дальнейшей доработки.

# ФИНАЛЬНЫЙ ФОРМАТ ВЫВОДА:
Ты ДОЛЖЕН вывести ответ СТРОГО в следующем формате. Не добавляй от себя ничего до или после этих блоков.

```prompt
[ЗДЕСЬ ТЫ ПОМЕЩАЕШЬ ГОТОВЫЙ, УЛУЧШЕННЫЙ ПРОМПТ, СОБРАННЫЙ НА ШАГЕ 4]
```

```rationale
[ЗДЕСЬ ТЫ ПОМЕЩАЕШЬ СВОЕ ОБЪЯСНЕНИЕ И ОБОСНОВАНИЕ С ШАГА 5]
```

---

НАЧНЕМ:

Пользователь предоставляет следующий сырой запрос для улучшения. Преврати его в высококачественный промпт, следуя инструкциям выше.

ЗАПРОС ПОЛЬЗОВАТЕЛЯ:
"{ЗДЕСЬ ВСТАВЬ СВОЙ ИСХОДНЫЙ ЗАПРОС}"

```

---

### Как использовать этот мега-промпт на практике: пошаговая инструкция

1.  **Подготовь исходный запрос.** Это твой первоначальный, "сырой" промпт, который ты хочешь улучшить.
    *   *Пример:* "Напиши пост в блог про искусственный интеллект."

2.  **Вставь его в шаблон.** Скопируй весь большой промпт выше и замени `"{ЗДЕСЬ ВСТАВЬ СВОЙ ИСХОДНЫЙ ЗАПРОС}"` на свой запрос.

3.  **Отправь LLM.** Отправь этот огромный промпт в выбранную тобой модель (GPT-4, Claude 3 и т.д.).

4.  **Получи и проанализируй результат.** Модель вернет тебе два четких блока: готовый промпт и объяснение к нему.
    *   **Готовый промпт** ты можешь сразу копировать и использовать.
    *   **Объяснение** поможет тебе понять логику и, при необходимости, сделать еще одну итерацию.

5.  **Итерация (опционально, но очень эффективно).**
    *   Ты можешь взять полученный улучшенный промпт и отправить его обратно в LLM-энчантер со следующим запросом:
    > "Вот улучшенный промпт, который я получил: [вставь промпт]. Я чувствую, что он все еще немного [слишком длинный / недостаточно креативный / не фокусируется на X]. Пожалуйста, переработай его, чтобы решить эти проблемы, сохранив все сильные стороны."

---

### Пример работы на практике

**Исходный запрос пользователя:**
> "Напиши код для скрейпинга сайта."

**После обработки LLM-Энчантером (сокращенный пример вывода):**

```prompt
# Готовый промпт, который вернула модель-энчантер:
Ты — senior Python-разработчик, специализирующийся на веб-скрейпинге и этичном сборе данных. Твоя задача — написать безопасный и эффективный код для скрейпинга данных с веб-сайта.

**Контекст:** Пользователю нужно извлечь список заголовков статей с главной страницы новостного сайта для личного исследовательского проекта. Код должен быть надежным и учитывать потенциальные проблемы с сетью.

**Задача:** Напиши Python-скрипт, который:
1.  Использует библиотеки `requests` и `BeautifulSoup` для HTTP-запросов и парсинга HTML.
2.  Извлекает все заголовки статей (предположительно, они находятся в тегах `<h2>` с классом `article-title`).
3.  Сохраняет извлеченные заголовки в файл `titles.txt`, каждый с новой строки.
4.  Корректно обрабатывает ошибки (например, недоступность сайта, изменение структуры HTML).

**Инструкции:**
- Код должен быть хорошо прокомментирован для новичка.
- Обязательно добавь заголовок `User-Agent` в HTTP-запрос, чтобы имитировать поведение браузера.
- Включи обработку исключений для `requests.exceptions.RequestException`.
- Если теги `<h2>` с классом `article-title` не найдены, выведи информативное сообщение.

**Формат вывода:** Выведи только готовый Python-код, без пояснений до или после него.
```

```rationale
# Объяснение, которое вернула модель-энчантер:
**Обоснование улучшений:**
1.  *Роль:* Я назначил роль "senior Python-разработчика...", чтобы код изначально соответствовал best practices в области скрейпинга.
2.  *Контекст:* Указание "для личного исследовательского проекта" добавляет этический контекст и может повлиять на сложность кода.
3.  *Структура задачи:* Я явно разбил задачу на 4 пронумерованных пункта, чтобы модель сгенерировала код, соответствующий всем требованиям.
4.  *Инструкции:* Конкретные указания по библиотекам, `User-Agent` и обработке ошибок сделают код более надежным и производственным.
5.  *Формат вывода:* Требование вывести "только код" исключит лишние текстовые пояснения от LLM, что удобно для прямого копирования.

**Потенциальные слабые места:** Этот промпт предполагает конкретную структуру HTML (`<h2 class="article-title">`). На реальном сайте теги могут отличаться. Для дальнейшего улучшения можно добавить шаг, где код сначала анализирует структуру сайта.
```

Резюме и советы

1. Выбирай мощную модель: Для роли энчантера лучше всего подходят самые продвинутые модели (GPT-4-Turbo, Claude 3 Opus), так как задача требует глубокого понимания и планирования.
2. Не бойся итераций: Первый улучшенный промпт — это часто только начало. Уточняй его снова и снова.
3. Специализируй энчантеров: Ты можешь создать разные промпты-шаблоны для разных типов задач: "Энчантер для написания кода", "Энчантер для креативных текстов", "Энчантер для анализа данных". Это даст еще лучшие результаты.

Используя этот подход, ты не просто "улучшаешь промпт", ты создаешь систему для гарантированного создания качественных промптов, что в конечном итоге сэкономит тебе огромное количество времени и drastically повысит качество твоего взаимодействия с любыми LLM.
